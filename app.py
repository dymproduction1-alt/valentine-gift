import os
from flask import Flask, render_template, jsonify

app = Flask(__name__)

# –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∫–æ–ª–µ–≥ Book.ua –Ω–∞ –í–î–ù–ì
colleagues_wishes = {
    "—Å–∞—à–∞": "–°–∞—à–æ, —Ç–∏ —è–∫ —Ç–µ–ø–ª–∏–π –∫–∞–∫–∞–æ —É –¥–æ—â–æ–≤–∏–π –¥–µ–Ω—å ‚Äî –∑ —Ç–æ–±–æ—é –∑–∞–≤–∂–¥–∏ –∑–∞—Ç–∏—à–Ω–æ! ‚ú®",
    "—ñ—Ä–∞": "–Ü—Ä–æ, –Ω–µ—Ö–∞–π —Ç–≤–æ—î –∂–∏—Ç—Ç—è –±—É–¥–µ —Ç–∞–∫–∏–º –∂–µ —è—Å–∫—Ä–∞–≤–∏–º, —è–∫ –∞—Ä–æ–º–∞—Ç —Å–≤—ñ–∂–æ—ó –∫–∞–≤–∏! ‚òï",
    "—é–ª—è 1": "–Æ–ª—é, —Ç–∏ ‚Äî —Å–ø—Ä–∞–≤–∂–Ω—è –æ–∫—Ä–∞—Å–∞ –Ω–∞—à–æ—ó –∫–æ–º–∞–Ω–¥–∏. –ù–µ—Ö–∞–π —Ä–∞–Ω–æ–∫ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –ø–æ—Å–º—ñ—à–∫–∏! üå∏",
    "—é–ª—è 2": "–Æ–ª—é, –±–∞–∂–∞—é —Ç–æ–±—ñ –∑–Ω–∞–π—Ç–∏ —Å–≤–æ—é –æ—Å–æ–±–ª–∏–≤—É —ñ—Å—Ç–æ—Ä—ñ—é —â–∞—Å—Ç—è —Å–µ—Ä–µ–¥ —Ç–∏—Å—è—á —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∂–∏—Ç—Ç—è! üìñ",
    "—é–ª—è 3": "–Æ–ª—é, –Ω–µ—Ö–∞–π —Ç–≤—ñ–π –¥–µ–Ω—å –±—É–¥–µ —Å–ø–æ–≤–Ω–µ–Ω–∏–π –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è —Ç–∞ –ø—Ä–∏—î–º–Ω–∏—Ö —Å—é—Ä–ø—Ä–∏–∑—ñ–≤! –í–∏ –∑ –¥—ñ–≤—á–∞—Ç–∞–º–∏ ‚Äî —Å–∏–ª–∞! üí™‚ú®",
    "—Å–æ–Ω—è": "–°–æ—Ñ—ñ—î (–Ω–∞—à–∞ –∑—ñ—Ä–∫–æ!), —Ç–∏ ‚Äî —è–∫ —Ä—ñ–¥–∫—ñ—Å–Ω–∏–π –∞—Ä—Ç-–±—É–∫: —Å—Ç–∏–ª—å–Ω–∞ —Ç–∞ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–æ –∫—Ä—É—Ç–∞! üé∏üåü",
    "—Ä–µ—Å—è": "–†–µ—Å—é, –Ω–µ—Ö–∞–π —Ü–µ–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Å—Ç—ñ–ª—å–∫–∏ –∂ —Ä–∞–¥–æ—Å—Ç—ñ, —Å–∫—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∫–Ω–∏–≥–∏! ‚ù§Ô∏è",
    "–∫–∞—Ç—è 1": "–ö–∞—Ç—é, —Ç–∏ ‚Äî –º–∞–π—Å—Ç–µ—Ä —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–∞—Å—Ç—Ä—ñ–π! –ù–µ—Ö–∞–π —Å–µ—Ä—Ü–µ –±'—î—Ç—å—Å—è –≤ —Ä–∏—Ç–º—ñ —â–∞—Å—Ç—è! üíÉ",
    "–∫–∞—Ç—è 2": "–ö–∞—Ç—é, –±–∞–∂–∞—é —Ç–æ–±—ñ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è —É –≤—Å—å–æ–º—É —Ç–∞ —ñ–¥–µ–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É, —è–∫ —É —Ä–∞—Ñ—ñ! üçØ",
    "–º–∞—Ä—ñ": "–ú–∞—Ä—ñ, —Ç–∏ –¥–æ–¥–∞—î—à –Ω–∞—à—ñ–π –∫–Ω–∏–≥–∞—Ä–Ω—ñ –æ—Å–æ–±–ª–∏–≤–æ–≥–æ —à–∞—Ä–º—É. –ë—É–¥—å —â–∞—Å–ª–∏–≤–∞! ü•ê‚ú®",
    "—Ç–∞–Ω—è": "–¢–∞–Ω—é, –Ω–µ—Ö–∞–π —Ç–≤–æ—è –æ—Å–æ–±–∏—Å—Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—è –∫–æ—Ö–∞–Ω–Ω—è –±—É–¥–µ –∫—Ä–∞—â–æ—é –∑–∞ –±—É–¥—å-—è–∫–∏–π –±–µ—Å—Ç—Å–µ–ª–µ—Ä! üíñ",
    "–∞–Ω–¥–∂–µ–ª–∞": "–ê–Ω–¥–∂–µ–ª–æ, —Ç–∏ ‚Äî –Ω–∞—à–µ —Å–≤—ñ—Ç–ª–æ! –ë–∞–∂–∞—é, —â–æ–± –∫–æ–∂–µ–Ω –¥–µ–Ω—å –±—É–≤ —Å–ø–æ–≤–Ω–µ–Ω–∏–π –º–∞–≥—ñ—ó! üòá",
    "–Ω–∞—Ç–∞—à–∞": "–ù–∞—Ç–∞–ª—é, –Ω–µ—Ö–∞–π —Ç–≤–æ—î –∂–∏—Ç—Ç—è –±—É–¥–µ —Å–æ–ª–æ–¥–∫–∏–º, —è–∫ –Ω–∞–π—Å–º–∞—á–Ω—ñ—à–∏–π –¥–µ—Å–µ—Ä—Ç —É –º–µ–Ω—é! üç∞",
    "–ª—é–¥–∞": "–õ—é–¥–æ, –±–∞–∂–∞—é —Ç–æ–±—ñ –≥–∞—Ä–º–æ–Ω—ñ—ó —Ç–∞ –±–µ–∑–º–µ–∂–Ω–æ–≥–æ –æ–∫–µ–∞–Ω—É –ø—Ä–∏—î–º–Ω–∏—Ö –≤—Ä–∞–∂–µ–Ω—å! üåä",
    "–ª–µ—Å—è": "–õ–µ—Å—é, —Ç–∏ ‚Äî –¥–∂–µ—Ä–µ–ª–æ –º—É–¥—Ä–æ—Å—Ç—ñ —Ç–∞ –¥–æ–±—Ä–æ—Ç–∏. –ù–µ—Ö–∞–π –¥–æ–ª—è –¥–∞—Ä—É—î –ª–∏—à–µ —Å—é—Ä–ø—Ä–∏–∑–∏! üéÅ",
    # –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥ –¥–ª—è –≤—Å—ñ—î—ó –∑–º—ñ–Ω–∏
    "bookua": "–î—ñ–≤—á–∞—Ç–∞, –≤–∏ ‚Äî –Ω–∞–π–∫—Ä–∞—â–∞ –∫–æ–º–∞–Ω–¥–∞ –í–î–ù–ì! –î—è–∫—É—é –∑–∞ –∫—Ä—É—Ç—ñ –∑–º—ñ–Ω–∏, —Å–º–∞—á–Ω—É –∫–∞–≤—É —Ç–∞ –Ω–∞–π–∫—Ä–∞—â—ñ –ø–æ—Ä–∞–¥–∏ —â–æ–¥–æ –∫–Ω–∏–≥! –í–∏ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω—ñ! ‚òïüìñ‚ù§Ô∏è"
}

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/greeting/<name>')
def get_greeting(name):
    name_key = name.lower().strip()
    
    # –ü—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è –Æ–ª—å —Ç–∞ –ö–∞—Ç—å
    if name_key == "—é–ª—è":
        return jsonify({"text": "–£ –Ω–∞—Å —Ç—Ä–∏ —á—É–¥–æ–≤—ñ –Æ–ª—ñ! –í–≤–µ–¥–∏ '–Æ–ª—è 1', '–Æ–ª—è 2' –∞–±–æ '–Æ–ª—è 3' üòä"})
    if name_key == "–∫–∞—Ç—è":
        return jsonify({"text": "–£ –Ω–∞—Å –¥–≤—ñ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ñ –ö–∞—Ç—ñ! –í–≤–µ–¥–∏ '–ö–∞—Ç—è 1' –∞–±–æ '–ö–∞—Ç—è 2' üòä"})

    prediction = colleagues_wishes.get(name_key)
    if prediction:
        return jsonify({"text": prediction})
    else:
        return jsonify({"text": f"{name}, —Ç–∏ —Ä–æ–±–∏—à Book.ua –∫—Ä–∞—â–∏–º –º—ñ—Å—Ü–µ–º! –ó—ñ —Å–≤—è—Ç–æ–º! ‚ú®"})

if __name__ == '__main__':
    port = int(os.environ.get("PORT", 5000))
    app.run(host='0.0.0.0', port=port)
